# Storage&Network Evaluation

## Storage

### 1.磁盘信息

本次测试在我的C盘上进行，以下为磁盘信息：

类型：SATA固态硬盘

大小：122104MB

型号：SAMSUNG MZNLN128HCGR-000L2

固件：EMT23L0R

磁盘数据高速缓存：已启用

SATA传输速率：6Gb/s

物理扇区大小：512bytes

逻辑扇区大小：512bytes

###2.实验环境

测试工具：IOMeter

测试指标：单位时间系统能处理的I/O请求数量

### 3.实验设计

由于IOPS受不同的读写请求类型影响，因此测试分为三部分进行：

- 按顺序只读/只写

- 随机只读/只写

- 随机读写混合,按照50%读和50%写来测试

  以上所有测试分开进行，均对一个大小为20000*sectors即10MB的分区进行读写。

  ### 4.实验数据

  按顺序只读/只写：

  | Seq/random | R/W  | Size | 1st IOps  | 2nd IOps  | avg IOps  |
  | ---------- | ---- | ---- | --------- | --------- | --------- |
  | seq        | r    | 4K   | 165390.43 | 162401.39 | 163895.91 |
  | seq        | r    | 16K  | 113060.55 | 122321.96 | 117691.26 |
  | seq        | r    | 32K  | 88233.89  | 89777.70  | 89005.80  |
  | seq        | r    | 64K  | 57882.58  | 61142.14  | 59512.36  |
  | seq        | w    | 4K   | 7502.94   | 7758.56   | 7630.75   |
  | seq        | w    | 16K  | 7682.81   | 7379.72   | 7531.27   |
  | seq        | w    | 32K  | 6872.42   | 7479.05   | 7175.74   |
  | seq        | w    | 64K  | 6472.59   | 6573.67   | 6523.13   |
  | rand       | r    | 4K   | 118178.54 | 115499.15 | 116838.85 |
  | rand       | r    | 16K  | 92520.95  | 93864.06  | 93192.51  |
  | rand       | r    | 32K  | 76034.20  | 75434.28  | 75734.24  |
  | rand       | r    | 64K  | 53696.60  | 54498.97  | 54097.79  |
  | rand       | w    | 4K   | 4705.48   | 4733.91   | 4719.70   |
  | rand       | w    | 16K  | 5109.15   | 5215.88   | 5162.52   |
  | rand       | w    | 32K  | 4779.72   | 4965.45   | 4872.59   |
  | rand       | w    | 64K  | 3636.47   | 3683.67   | 3660.07   |
  | rand       | r&w  | 4K   | 9062.26   | 9519.52   | 9290.89   |
  | rand       | r&w  | 16K  | 9777.64   | 10121.97  | 9949.81   |
  | rand       | r&w  | 32K  | 8385.42   | 8551.35   | 8468.39   |
  | rand       | r&w  | 64K  | 6692.54   | 6586.02   | 6639.28   |



  ### 5.结果分析

  - 随机IO慢于顺序IO
  - IOps随着workload的增大而呈现增大趋势
  - 无论是随机还是按顺序，读操作快于写操作

## Network

### 1.实验环境

测试工具：IOMeter+DYNAMO

测试指标：

- 带宽
- 每秒事务数量
- 平均响应时间
- 最大响应时间
- 每秒数据包数量

### 2.实验设计

实验中设计了大小为512bytes,4K,16K,32K,64K五种大小的workload.每种均为了模拟真实的网络请求，由67%随机读和33%随机写组成，统计了各个workload下的数据。

### 3.测试结果

| size | MB ps     | Transactions per Second | Average Response Time | Maximum Response Time | Packets/ Second |
| ---- | --------- | ----------------------- | --------------------- | --------------------- | --------------- |
| 512B | 2.017414  | 3940.261                | 0.253184              | 13.489383             | 119.3418        |
| 4K   | 16.632232 | 4060.604                | 0.245675              | 19.03328              | 99.99575        |
| 16K  | 75.54026  | 4610.612                | 0.216344              | 8.184494              | 124.1395        |
| 32K  | 136.5157  | 4166.128                | 0.239536              | 5.543111              | 115.9681        |
| 64K  | 228.9641  | 3493.715                | 0.28575               | 6.33284               | 78.31722        |



### 4.结果分析

- 随着workload增大，每秒的数据传输量不断上升并趋于一个稳定值
- 随workload增大，每秒处理的事务数量下降，平均响应时间增加，对于单个请求来说latency会变大
- 最大响应时间随workload增大而减少。